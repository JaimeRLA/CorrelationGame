<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Asocia â€” Cadena</title>
  <style>
    body{
      margin:0;
      font-family:system-ui;
      background:#0b0f14;
      color:#e9eef7;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      text-align:center;
    }
    header{padding:24px;font-weight:bold;font-size:2rem}
    .row{display:flex;align-items:center;justify-content:center;gap:24px;margin:40px 0}
    .box{min-width:200px;min-height:140px;padding:20px;border-radius:16px;border:3px solid #2a3648;display:flex;align-items:center;justify-content:center;text-align:center;font-size:2rem}
    .box strong{font-size:2rem}
    .box input{all:unset;width:100%;height:100%;text-align:center;font-size:2rem}
    button{all:unset;cursor:pointer;background:#4f9cff;color:#0b0f14;padding:16px 28px;border-radius:12px;font-weight:700;margin:12px;font-size:1.2rem}
    .msg{margin-top:20px;font-size:1.2rem}
    .ok{color:#2ecc71}.bad{color:#ff5a5a}.warn{color:#f0c94b}
  </style>
</head>
<body>
  <header>ðŸ”— Juego de Asociaciones</header>
  <div class="row">
    <div class="box" id="startBox"></div>
    <div class="box"><input id="middleInput" placeholder="Escribe conexiÃ³nâ€¦"/></div>
    <div class="box" id="endBox"></div>
  </div>
  <div>
    <button id="checkBtn">Comprobar</button>
    <button id="revealBtn">Mostrar soluciÃ³n</button>
    <button id="nextBtn">Siguiente</button>
  </div>
  <div class="msg" id="message"></div>

<script>
  const NODES = [
    { type:'text', value:'GATO' },
    { type:'text', value:'RATÃ“N' },
    { type:'text', value:'QUESO' }
  ];
  const ANSWERS = [
    ['depredador','cazador','caza'],
    ['alimento','comida','lacteo']
  ];

  let edgeIndex = 0;
  let solved = false;

  const startBox = document.getElementById('startBox');
  const endBox   = document.getElementById('endBox');
  const middleInput = document.getElementById('middleInput');
  const msgEl = document.getElementById('message');

  function renderEndpoint(el, node){
    el.innerHTML = '';
    if(node.type==='text'){
      const span=document.createElement('strong');
      span.textContent=node.value;
      el.appendChild(span);
    } else if(node.type==='image'){
      const img=document.createElement('img');
      img.src=node.src;img.alt=node.alt||'Imagen';img.style.maxWidth='100%';img.style.maxHeight='100px';
      el.appendChild(img);
    }
  }

  function loadStep(){
    renderEndpoint(startBox,NODES[edgeIndex]);
    renderEndpoint(endBox,NODES[edgeIndex+1]);
    middleInput.value='';
    msgEl.textContent='';msgEl.className='msg';
    solved = false;
  }

  function normalize(s){return (s||'').trim().toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');}

  function check(){
    const val=normalize(middleInput.value);
    if(!val){showMsg('Escribe algo.','warn');return;}
    if(ANSWERS[edgeIndex].map(normalize).includes(val)){
      showMsg('Â¡Correcto! ðŸŽ‰','ok');
      solved = true;
    } else {
      showMsg('No es correcto.','bad');
      solved = false;
    }
  }

  function reveal(){
    middleInput.value=ANSWERS[edgeIndex][0]||'';
    showMsg('SoluciÃ³n mostrada.','warn');
    solved = true;
  }

  function next(){
    if(!solved){
      showMsg('Debes resolver este paso antes de continuar.','warn');
      return;
    }
    edgeIndex=(edgeIndex+1)%(NODES.length-1);
    loadStep();
  }

  function showMsg(t,k){msgEl.textContent=t;msgEl.className='msg '+k;}

  document.getElementById('checkBtn').onclick=check;
  document.getElementById('revealBtn').onclick=reveal;
  document.getElementById('nextBtn').onclick=next;
  middleInput.addEventListener('keydown',e=>{if(e.key==='Enter')check();});

  loadStep();
</script>
</body>
</html>
